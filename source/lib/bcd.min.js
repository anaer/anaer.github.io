/*! BCD v1.0.6 | (c) Tencent, Inc. | MIT License */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BCD=e():t.BCD=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){try{return new Function("obj, config","var s_ret='', _slice=[].slice, BCD=this;\nvar print=function(){s_ret+=_slice.apply(arguments).join('')};\ns_ret+='"+t.replace(/[\n\r]/g," ").replace(/<%\s*-(.*?)%>/g,"'+\n\t(BCD.escape($1))+\n\t'").replace(/<%\s*=(.*?)%>/g,"'+\n\t($1)+\n\t'").replace(/<%/g,"';\n").replace(/%>\s*/g,"\ns_ret+='")+"';\nreturn s_ret;"+(c?"\n//# sourceURL=t://template/"+e:"")).bind(f)}catch(t){return f.reportError(t,"template wrong!"),function(){}}}var i=n(1),o=n(2),a=n(3),s=n(4),c=n(5),u=n(6).ajaxCache,f={is:i,url:o,time:a,cache:n(7),ajaxCache:u,history:s,extendState:s.extendState,isDebug:c},l={},h={},d=f.getScrollY=function(){return window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop};f.setTitle=function(t){document.title=t},f.reportError=function(t,e){e&&console.log("%c--"+e+"--","color: red;"),c&&console.debug(t.stack)};var v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},p=/[<'>"&`]/,g=/[<'>"&`]/g;f.escape=function(t){return t=null==t?"":""+t,p.test(t)?t.replace(g,function(t){return v[t]}):""+(t||"")},f.template=function(t,e){e=e||"undefined/";var n,i=l[e];return e in h?n=i[t]:(i=l[e]={},h[e]=-1),n||(e+=++h[e]||"",n=i[t]=r(t,e),n.viewName=e),n};var m={};f.addEvent=function(t,e){t in m&&f.reportError(new Error('The event "'+t+'" already exists, rename it!',"addEvent")),m[t]=e},f.bindEvent=function(t){var e=$(this);return e.find("[data-on]").each(function(){var e,n=$(this),r={},i=n.attr("data-on");if(i)try{r=o.getParamObj(i),e=m[r.m],e&&(r.url=n.attr("data-url"),e(n,r,t),n.removeAttr("data-on"),n.attr("data-event",i))}catch(t){f.reportError(t,'bindEvent action "'+i)}}),e},$.fn.bindEvent=$.fn.bindEvent||f.bindEvent,$.fn.setView=$.fn.setView||function(t){var e=this,n=e[0];if(!n)return void f.reportError(new Error("the dom is not exit in html"),"domError");var r=n.BCD_viewOption||{};return r.__isInit?$.extend(r,t):!function(){function c(){return(r.viewList||[]).filter(function(t,n){return t&&t.reset?(t[0]&&t[0].parentNode&&t[0].parentNode.nodeType===(Element.ELEMENT_NODE||1)||e.append(t),!t.getViewOption("delay")):void f.reportError(new Error("viewList index="+n+" is wrong value!"))}).forEach(function(t){t.reset()}),y=!0,e.bindEvent(m)}function l(){if(e.attr("data-page")){var t=f.getPage();if(t&&t[0]!==n)return}var i=e.css("display");switch(r.end&&r.end.call(e,p,r)){case"hide":"none"!=i&&e.hide().trigger("hide");break;case!1:break;default:"none"==i&&e.show().trigger("show")}}function h(t){e.attr("data-view",t),c(),l()}function d(t,n,o,a){var s,c,u,l;try{if(l=r.name||e.attr("data-view"),!n||0!==r.cache.indexOf("next")){if(s=i.s(r.template)?f.template(r.template,l):r.template,p=t,i.f(s)?(m=r.filter?r.filter.call(e,t,r,a):t,u=s(m,r.config||{}),e[_](u),l=s.viewName):l=l||"container",h(l),c=r.check||g&&function(t){return t&&0===t.ret},!c)return 0;if(!c.call(e,p,r))return 0}return r.cache.indexOf("local")>0?1:2}catch(t){f.reportError(t,'view render "'+l+'" has wrong '+(r.url?"ajax:"+r.url:"data"))}finally{e.trigger("reset",{data:p,options:r})}}function v(t){try{if(t&&i.s(t))r.update&&!o.getParam("t",t)&&(t=o.setParam("t",a.get(r.update||"t"),t)),r.url=t,g=u.call(e,{url:t,success:d,error:r.error,timeout:r.timeout,useCache:w,xhrFields:{withCredentials:!!r.withCredentials}});else if(t&&i.f(t))v(t.call(e,y,r));else{if(!t||!i.f(t.then))return d(t,0,r,p);var n=t.then(function(t){v(t)});n.catch&&n.catch(function(t){f.reportError(t,r.name+" view promise reject")})}}catch(t){f.reportError(t,r.name+" view fetch error")}}var p,g,m,w,_="html",y=!1;r=n.BCD_viewOption=$.extend({},t),r.__isInit=!0,r.cache=r.cache||"normal_local",r.__getData=function(){return p||r.data},r.__setData=function(t){var e=v(t||r.source);e&&i.f(g)&&i.o(t)&&g(t,e)},r.__reset=function(t){try{var n,i=r.start&&r.start.call(e,y,r,t);if("show"===i)return l(),e;r.template&&(w=s.getCode()==-1||0!==r.cache.indexOf("normal"),_=r.full||"html","html"!=_||w||i===!1||e.hide(),n=r.getData||function(){return r.data?r.data:r.url||p}),t=t||r.source||n,v(t)}catch(t){f.reportError(t,r.name+" reset")}return e}}(),e},$.fn.getViewOption=function(t){if(!this[0])return null;var e=this[0].BCD_viewOption=this[0].BCD_viewOption||{};return t?e[t]:e},$.fn.reset=$.fn.reset||function(t){var e=this.getViewOption(),n=e&&e.__reset;return n?n(t):($(this).bindEvent().show(),this.bindEvent())},$.fn.getData=function(){var t=this.getViewOption().__getData;return t?t():null},$.fn.setData=$.fn.setData||function(t){var e=this.getViewOption().__setData;return e&&e(t),this},$.fn.addView=function(t){var e=this.getViewOption("viewList")||[];return e.push(t),this.setView({viewList:e})},$.fn.removeView=function(t){var e=this.getViewOption("viewList")||[];return this.setView({viewList:e.filter(function(e){return t[0]!==e[0]||(e.remove(),!1)})})},$.fn.getPage=function(){return this.data("page")?this:$(this.parents("[data-page]")[0])},$.fn.getView=function(){return this.data("view")?this:$(this.parents("[data-view]")[0])},$.fn.showParentView=function(){this.parents("[data-view]").show()},f.getHash=function(t){return location.hash.split("/").slice(1)[t]};var w;f.getPage=function(){return w||$("body")},f.app=function(t){function e(t){document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),s.getCode()!=-1&&scrollTo(0,0),f.setTitle(t.getViewOption("title")||""),t.reset(),u()}function n(t){w.hide().trigger("hide");var n=f.getHash(0)||"undefined",r=o[n];r?(w=r,e(r)):a&&/^[^"<>]+$/.test(n)?(w=r=$('<div data-page="'+n+'"></div>'),a.call(r,n,function(t){t!==-1&&($("body").append(r),o[n]=r,e(r))})):f.replaceHash(c)}function r(){n(location.hash)}var i=$("[data-page]"),o={},a=null;i.length&&i.each(function(){var t=$(this);o[t.attr("data-page")]=t.hide()}),w=$(i[0]);var c="#!/"+w.attr("data-page"),u=function(){console.log("logPV")};t&&(t.initHTML&&(document.body.innerHTML=t.initHTML),a=t.initPage,f.setTitle=t.setTitle||f.setTitle,c=t.defHash||c,f.reportError=t.reportError||f.reportError,u=t.logPV||u),f.replaceHash=function(t){f.extendState({scrollY:d()},t),s.replace(),n(t)},s.bindPopState(r)},f.Events={_callFun:function(t){t in this._events&&this._events[t].apply(this,arguments)},_forFun:function(t,e){var n=e[0];if(i.s(n))t.apply(this,e);else{var r=/.*/;e=[].slice.call(e),i.r(n)?r=n:e.unshift(r);for(var o in this._events)r.test(o)&&(e[0]=o,t.apply(this,e))}return this},on:function(t,e){return this._events=this._events||{},this._events[t]=e,this},off:function(t){return this._events?this._forFun.call(this,function(e){delete this._events[t]},arguments):this},trigger:function(t){return this._events?this._forFun.call(this,this._callFun,arguments):this}},f.Model=function(t){var e=t;this.set=function(t,n){return 2===arguments.length?(e=e||{},e[t]=n):e=t,this},this.get=function(t){return t?e&&e[t]:e},$.extend(this,f.Events)},f.scrollY=new f.Model;var _=d();window.onscroll=function(t){var e=d();f.scrollY.trigger(new RegExp(f.getHash(0)+"/?.*"),e,_),_=e},f.go=function(t,e){f.extendState({scrollY:d()}),s.go(t,e)},$(window).on("error",function(t){var e=t.error||t;f.reportError(e,"windowError")}),t.exports=f},function(t,e){"use strict";function n(t){return Object.prototype.toString.call(t).slice(8,-1)}function r(t){return function(e){return n(e)==t}}var i={String:"s",Boolean:"b",Number:"n",Function:"f",Undefined:"u",Null:"nl",Array:"a",Date:"d",RegExp:"r"};for(var o in i)n[i[o]]=r(o);n.o=function(t){return"object"==typeof t},t.exports=n},function(t,e){"use strict";function n(t){var e=t.match(/([^#?]*)(\??[^#]*)(#?.*)/);return e?e.slice(1):[t]}function r(t,e,n){var r,i;return n=n.replace(new RegExp("([&?#])"+t+"=([^&#]*)(&?)"),function(n,o,a,s){return i=a,e===!1?n:(r=!0,void 0===e?s?o:"":o+t+"="+e+s)}),{value:i,hasKey:r,parament:n}}function i(t,e,i,o){o=o||1;var a=n(i||location.href),s=r(t,e,a[o]);return a[o]=s.parament,s.arr=a,s}function o(t){var e=i("t",void 0,t,1);return{time:e.value||"",name:e.arr.join("")}}function a(t){return h.href=t,h.href}function s(t){if(!t)return d;var e={},r=n(t);if(r[1]){r=r[1].substr(1).split(/[=&]/);for(var i=r.length/2,o=0;o<i;o++)e[r[2*o]]=r[2*o+1]}return e}function c(t,e,n){return i(t,!1,e,n).value}function u(t,e,n,r){r=r||1;var o=["&","?","#"],a=i(t,e,n,r),s=a.arr;return a.hasKey||(s[r]+=(1===s[r].length?"":o[s[r]?0:r])+t+"="+e),s.join("")}function f(t,e,n){return i(t,void 0,e,n).arr.join("")}var l=$('<div><a href=""/></a></div>')[0],h=l.firstChild,d=s(location.href);t.exports={abs:a,parser:n,process:r,separateTime:o,getParamObj:s,getParam:c,setParam:u,removeParam:f}},function(t,e){"use strict";function n(t){return t>9?t:"0"+t}function r(t,e){return(e||new Date)[o[t]]()}function i(t,e){return e.replace(/%[yMdhmst]/g,function(e){var i=r(e[1],t);return n("%M"===e?1+i:i)})}var o={y:"getFullYear",M:"getMonth",d:"getDate",h:"getHours",m:"getMinutes",s:"getSeconds",t:"getTime"};t.exports={get:r,formatDate:i,methodMap:o}},function(t,e,n){"use strict";function r(){return u.length-1}function i(t,e){t=$.extend({},history.state,t),history.replaceState(t,null,e||location.hash)}function o(t){u.push(t);for(var e=0,n=u.length;e<n;e++)if(u[e].isBegin)return u.splice(0,e)}function a(){i({historyVariable:v})}function s(){var t={href:location.href,title:document.title},e=r();e>0?u[e-1].href==location.href?(d=-1,u.unshift(u.pop())):u[e].href==location.href?(d=0,v.isGo?d=2:p&&(d=1),u[e]=t):u[0].href==location.href?(d=1,u.push(u.shift())):(d=2,o(t)):(d=3,u.push(t)),v.isGo=0,a()}function c(t){u[r()].title=t||document.title,a()}var u,f,l=n(1),h=n(2),d=3,v={list:[{isBegin:1,href:document.referrer}],isGo:0},p=0,g=location.hash;history.state&&history.state.historyVariable&&(v=history.state.historyVariable),u=v.list,f=u[r()].href,t.exports={extendState:i,updateTitle:c,getCode:function(){return d},get:function(){return u},getLastPage:function(){return f},getState:function(t){return t=l.u(t)?-1:t,u.slice(t)[0]},replace:function(){var t=r();f=u[t].href,u[t]={href:location.href,title:document.title},d=4,a()},go:function(t,e){c(),f=location.href,e=e||{},e.href=h.abs(t),v.isGo=1,o(e),a(),location.href=t},bindPopState:function(t){function e(){s(),t()}if(l.f(t)){var n=navigator.userAgent||"",r=1;/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(n)&&(r=0,setTimeout(function(){r=1},5e3)),e(),window[n.indexOf("Trident")>-1?"onhashchange":"onpopstate"]=function(){(r||g!=location.hash)&&(p=1,e(),g=location.hash,p=0)}}}}},function(t,e){"use strict";function n(){}t.exports=/Debug/.test(n)||!!window.global_isDebug},function(t,e,n){"use strict";function r(t){var e={dataType:"json",timeout:8e3};$.extend(e,t),$.ajax(e)}function i(t,e,n,i,c){function u(t,e){var n=g||{ct:p.time};switch(p.time.length<5&&(n.ct=p.time),e){case 1:o.setLocal(p.name,t,n);break;case 2:o.setSession(p.name,t,n)}}function f(t){h.success=function(n){u(n,e.call(m,n,w,h,t))},h.error=function(){c&&t||(s.f(n)?n.call(m,t,w,h):c&&e.call(m,t,w,h))},r(h)}var l=t,h=t;s.s(t)?(h={url:l},i&&(h.timeout=i)):(l=h.url,e=h.success,n=h.error,c=h.useCache);var d,v,p=a.separateTime(l),g=o._get(p.name)||o._getSession(p.name),m=this,w=0;return g&&(d=g.v,v=p.time&&g.ct===p.time,(c||v)&&(e.call(m,d,w,h),w=1)),v||f(d),u}var o=n(7),a=n(2),s=n(1);t.exports={ajax:r,ajaxCache:i}},function(t,e,n){"use strict";function r(t,e){return e=e||{},e.t=g,e.v=t,e}function i(t,e,n){n||(n=a(t));var o=r(e,n);try{localStorage.setItem(t,JSON.stringify(o))}catch(r){n&&n.isFail?(p[t]=o,localStorage.clear()):(f(0,g-v),n=n||{},n.isFail=1,i(t,e,n))}}function o(t,e,n){n||(n=s(t));var o=r(e,n);try{sessionStorage.setItem(t,JSON.stringify(o))}catch(n){i("BCD_db_"+t,e)}}function a(t){try{var e=localStorage.getItem(t);return e?d.parse(e):p[t]}catch(e){return p[t]}}function s(t){try{var e=sessionStorage.getItem(t);return e?d.parse(e):a("BCD_db_"+t)}catch(e){return a("BCD_db_"+t)}}function c(t,e){var n=a(t);return n&&!n.permanent&&n.t&&n.t<=e}function u(t,e){var n=g-e;return h.r(t)&&h.n(e)?function(e){return c(e,n)&&t.test(e)}:h.r(t)?function(e){return t.test(e)}:h.n(e)?function(t){return c(t,n)}:0}function f(t,e){try{if(h.s(t))delete p[t],localStorage.removeItem(t);else{var n=u(t,e)||function(t){var e=a(t);return e&&!e.permanent};if(n)for(var r in localStorage)n(r)&&localStorage.removeItem(r)}}catch(t){}}function l(t){try{if(h.s(t))delete p["BCD_db_"+t],sessionStorage.removeItem(t);else{var e=u(t);if(e)for(var n in sessionStorage)e(n)&&sessionStorage.removeItem(n)}}catch(t){f(/^BCD_db_/)}}var h=n(1),d=n(8),v=1,p={},g=parseInt(Date.now()/36e5);setTimeout(function(){f(/^BCD_db_/,1)},5e3),t.exports={setLocal:i,setSession:o,_get:a,getLocal:function(t,e){var n=a(t);return n?n.v:e||null},_getSession:s,getSession:function(t,e){var n=s(t);return n?n.v:e||null},removeLocal:f,removeSession:l}},function(t,e){"use strict";function n(t){try{return JSON.parse(t)}catch(t){}return""}function r(t){try{return JSON.stringify(t)}catch(t){return""}}t.exports={parse:n,stringify:r}}])});